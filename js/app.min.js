"use strict";

document.addEventListener('DOMContentLoaded', function () {
  // global var's
  var headerPadding = null;

  // function's
  function bodyFixScroll(status) {
    var scrollPosition = 0;
    var paddingOffset = window.innerWidth - document.body.offsetWidth + 'px';
    var elementsFixed = document.querySelectorAll('.fixed');
    if (status) {
      scrollPosition = window.pageYOffset;
      document.body.style.overflow = 'hidden';
      document.body.style.position = 'fixed';
      document.body.style.top = '-' + scrollPosition + 'px';
      document.body.style.width = '100%';
      document.body.style.paddingRight = paddingOffset;
      if (elementsFixed) {
        elementsFixed.forEach(function (item) {
          item.style.marginRight = paddingOffset;
        });
      }
    } else {
      scrollPosition = Math.abs(parseInt(document.querySelector('body').style.top.replace('px', '')));
      document.body.style.removeProperty('overflow');
      document.body.style.removeProperty('position');
      document.body.style.removeProperty('top');
      document.body.style.removeProperty('width');
      document.body.style.removeProperty('padding-right');
      if (elementsFixed) {
        elementsFixed.forEach(function (item) {
          item.style.removeProperty('margin-right');
        });
      }
      window.scrollTo({
        top: !isNaN(scrollPosition) ? scrollPosition : 0,
        behavior: "instant"
      });
    }
  }
  function reload(item) {
    var item_id = item.dataset.item_id;
    var url = item.dataset.url;
    var ideasTooltip = null;
    item.addEventListener('mouseenter', function () {
      var top = window.pageYOffset + item.getBoundingClientRect().top - Number(10) + 'px';
      var left = item.getBoundingClientRect().left + item.getBoundingClientRect().width + Number(34) + 'px';
      // console.log(left)

      console.log(existIdeasList);
      console.log(item_id);
      if (existIdeasList.indexOf(item_id) >= 0) {
        ideasTooltip = document.getElementById('ideas-tooltip-' + item_id);
        if (item.closest('.ideas-popup')) {
          ideasTooltip.style.position = 'fixed';
        }
        ideasTooltips.forEach(function (ideasTooltipEl) {
          ideasTooltipEl.style.display = 'none';
        });
        ideasTooltip.style.display = 'block';
        ideasTooltip.style.top = top;
        ideasTooltip.style.left = left;
      } else {
        if (existIdeasList.indexOf(item_id) === -1) {
          $.ajax({
            url: url,
            success: function success(data) {
              $("body").append(data);
              ideasTooltip = document.getElementById('ideas-tooltip-' + item_id);
              if (item.closest('.ideas-popup')) {
                ideasTooltip.style.position = 'fixed';
              }
              ideasTooltips.forEach(function (ideasTooltipEl) {
                ideasTooltipEl.style.display = 'none';
              });
              ideasTooltip.style.display = 'block';
              ideasTooltip.style.top = top;
              ideasTooltip.style.left = left;
              existIdeasList.push(item_id);
            }
          });
        }
      }
      document.querySelectorAll('.ideas__img-bullet').forEach(function (child) {
        return child.removeAttribute('data-current');
      });
      item.dataset.current = true;
      document.querySelectorAll('.ideas__img').forEach(function (child) {
        return child.removeAttribute('data-current');
      });
      document.querySelectorAll('.ideas-popup__img').forEach(function (child) {
        return child.removeAttribute('data-current');
      });
      if (item.closest('.ideas__img')) {
        item.closest('.ideas__img').dataset.current = true;
      }
      if (item.closest('.ideas-popup__img')) {
        item.closest('.ideas-popup__img').dataset.current = true;
      }
    });
    item.addEventListener('mouseleave', function () {
      if (typeof ideasTooltip != 'undefined' && ideasTooltip != null) {
        ideasTooltip.style.position = 'absolute';
        ideasTooltip.style.display = 'none';
      }
    });
  }
  function isTouchDevice() {
    return 'ontouchstart' in window || navigator.maxTouchPoints > 0 || navigator.msMaxTouchPoints > 0;
  }
  function headerPosition() {
    if (header.classList.contains('header--menu')) {
      header.classList.remove('header--menu');
    } else if (header.classList.contains('header--search')) {
      header.classList.remove('header--search');
    } else if (header.classList.contains('header--search-menu')) {
      header.classList.remove('header--search-menu');
    } else if (header.classList.contains('header--menu-search')) {
      header.classList.remove('header--menu-search');
    }
    header.classList.remove('header--fixed');
    hamburger.classList.remove('hamburger--active');
    bodyFixScroll();
    header.classList.remove('is--fixed');
    header.classList.add('is--loading');
    header.querySelector('.header__fixed').removeAttribute('style');
    setTimeout(function () {
      header.classList.remove('is--loading');
      headerPadding = getComputedStyle(header.querySelector('.header__fixed')).paddingTop;
      if (window.pageYOffset >= header.getBoundingClientRect().height) {
        header.querySelector('.header__fixed').style.transform = 'translate3d(0px, -100%, 0px)';
        header.querySelector('.header__fixed').style.padding = '10px 0';
        if (header.classList.contains('is--fixed')) {
          header.querySelector('.header__fixed').style.transition = 'transform 0.2s ease-in-out, background 0.15s ease';
        } else {
          header.querySelector('.header__fixed').style.transition = 'none';
          setTimeout(function () {
            header.querySelector('.header__fixed').style.transition = 'transform 0.2s ease-in-out, background 0.15s ease';
          }, 1);
        }
      }
    }, 500);
  }
  function headerFixedUp() {
    // console.log(window.pageYOffset, parseInt(headerPadding) - parseInt(getComputedStyle(header.querySelector('.header__fixed')).paddingTop))
    if (window.pageYOffset >= header.getBoundingClientRect().height) {
      header.classList.add('is--fixed');
      header.querySelector('.header__fixed').style.position = 'fixed';
      header.querySelector('.header__fixed').style.transform = 'translate3d(0px, 0px, 0px)';
      header.querySelector('.header__fixed').style.background = 'rgba(42, 43, 41, 0.80)';
    } else if (window.pageYOffset <= (parseInt(headerPadding), parseInt(getComputedStyle(header.querySelector('.header__fixed')).paddingTop))) {
      header.classList.remove('is--fixed');
      header.querySelector('.header__fixed').style.position = 'relative';
      header.querySelector('.header__fixed').style.paddingTop = headerPadding;
      header.querySelector('.header__fixed').style.paddingBottom = '0px';
      header.querySelector('.header__fixed').style.background = 'transparent';
      // header.querySelector('.header__fixed').removeAttribute('style')

      // header.querySelector('.header__fixed').style.transform = 'translate3d(0px, 0px, 0px)'
      // header.querySelector('.header__fixed').style.padding = '0'
      // header.querySelector('.header__fixed').style.transition = 'background 0.15s ease'
      // header.querySelector('.header__fixed').style.position = 'relative'
      // header.querySelector('.header__fixed').style.background = 'transparent'

      // if (header.classList.contains('header--temp')) {
      //     header.classList.remove('header--transparent')
      //     header.classList.remove('header--temp')
      // }
    }
  }

  function headerFixedDown() {
    if (window.pageYOffset >= header.getBoundingClientRect().height) {
      header.querySelector('.header__fixed').style.transform = 'translate3d(0px, -100%, 0px)';
      header.querySelector('.header__fixed').style.padding = '10px 0';
      if (header.classList.contains('is--fixed')) {
        header.querySelector('.header__fixed').style.transition = 'transform 0.2s ease-in-out, background 0.15s ease';
      } else {
        header.querySelector('.header__fixed').style.transition = 'none';
        setTimeout(function () {
          header.querySelector('.header__fixed').style.transition = 'transform 0.2s ease-in-out, background 0.15s ease';
        }, 1);
      }

      // setTimeout(() => {
      //     header.querySelector('.header__fixed').style.background = 'transparent'
      //     header.querySelector('.header__fixed').style.position = 'fixed'

      //     if (!header.classList.contains('header--transparent')) {
      //         header.classList.add('header--transparent')
      //         header.classList.add('header--temp')
      //     }
      // }, 200)
    }
  }

  // slides up/down/toggle
  var slideUpQna = function slideUpQna(trigger, target) {
    var duration = arguments.length > 2 && arguments[2] !== undefined ? arguments[2] : 400;
    target.style.transitionProperty = 'height, margin, padding';
    target.style.transitionDuration = duration + 'ms';
    target.style.height = target.offsetHeight + 'px';
    target.offsetHeight;
    target.style.overflow = 'hidden';
    target.style.height = 0;
    target.style.paddingTop = 0;
    target.style.paddingBottom = 0;
    target.style.marginTop = 0;
    target.style.marginBottom = 0;
    trigger.style.pointerEvents = 'none';
    window.setTimeout(function () {
      target.style.display = 'none';
      target.style.removeProperty('height');
      target.style.removeProperty('padding-top');
      target.style.removeProperty('padding-bottom');
      target.style.removeProperty('margin-top');
      target.style.removeProperty('margin-bottom');
      target.style.removeProperty('overflow');
      target.style.removeProperty('transition-duration');
      target.style.removeProperty('transition-property');
      trigger.style.pointerEvents = 'auto';
    }, duration);
    target.parentNode.classList.remove('is--open');
  };
  var slideDownQna = function slideDownQna(trigger, target) {
    var duration = arguments.length > 2 && arguments[2] !== undefined ? arguments[2] : 400;
    target.style.removeProperty('display');
    var display = window.getComputedStyle(target).display;
    if (display === 'none') display = 'block';
    target.style.display = display;
    var height = target.offsetHeight;
    target.style.overflow = 'hidden';
    target.style.height = 0;
    target.style.paddingTop = 0;
    target.style.paddingBottom = 0;
    target.style.marginTop = 0;
    target.style.marginBottom = 0;
    target.offsetHeight;
    target.style.transitionProperty = "height, margin, padding";
    target.style.transitionDuration = duration + 'ms';
    target.style.height = height + 'px';
    target.style.removeProperty('padding-top');
    target.style.removeProperty('padding-bottom');
    target.style.removeProperty('margin-top');
    target.style.removeProperty('margin-bottom');
    trigger.style.pointerEvents = 'none';
    window.setTimeout(function () {
      target.style.removeProperty('height');
      target.style.removeProperty('overflow');
      target.style.removeProperty('transition-duration');
      target.style.removeProperty('transition-property');
      trigger.style.pointerEvents = 'auto';
    }, duration);
    target.parentNode.classList.add('is--open');
  };
  var slideUpSingleQna = function slideUpSingleQna(trigger, target) {
    var duration = arguments.length > 2 && arguments[2] !== undefined ? arguments[2] : 400;
    target.style.transitionProperty = 'height, margin, padding';
    target.style.transitionDuration = duration + 'ms';
    target.style.height = target.offsetHeight + 'px';
    target.offsetHeight;
    target.style.overflow = 'hidden';
    target.style.height = 0;
    target.style.paddingTop = 0;
    target.style.paddingBottom = 0;
    target.style.marginTop = 0;
    target.style.marginBottom = 0;
    trigger.style.pointerEvents = 'none';
    window.setTimeout(function () {
      target.style.display = 'none';
      target.style.removeProperty('height');
      target.style.removeProperty('padding-top');
      target.style.removeProperty('padding-bottom');
      target.style.removeProperty('margin-top');
      target.style.removeProperty('margin-bottom');
      target.style.removeProperty('overflow');
      target.style.removeProperty('transition-duration');
      target.style.removeProperty('transition-property');
      trigger.style.pointerEvents = 'auto';
    }, duration);
    trigger.classList.remove('is--open');
  };
  var slideDownSingleQna = function slideDownSingleQna(trigger, target) {
    var duration = arguments.length > 2 && arguments[2] !== undefined ? arguments[2] : 400;
    target.style.removeProperty('display');
    var display = window.getComputedStyle(target).display;
    if (display === 'none') display = 'block';
    target.style.display = display;
    var height = target.offsetHeight;
    target.style.overflow = 'hidden';
    target.style.height = 0;
    target.style.paddingTop = 0;
    target.style.paddingBottom = 0;
    target.style.marginTop = 0;
    target.style.marginBottom = 0;
    target.offsetHeight;
    target.style.transitionProperty = "height, margin, padding";
    target.style.transitionDuration = duration + 'ms';
    target.style.height = height + 'px';
    target.style.removeProperty('padding-top');
    target.style.removeProperty('padding-bottom');
    target.style.removeProperty('margin-top');
    target.style.removeProperty('margin-bottom');
    trigger.style.pointerEvents = 'none';
    window.setTimeout(function () {
      target.style.removeProperty('height');
      target.style.removeProperty('overflow');
      target.style.removeProperty('transition-duration');
      target.style.removeProperty('transition-property');
      trigger.style.pointerEvents = 'auto';
    }, duration);
    trigger.classList.add('is--open');
  };

  // inputmask
  Inputmask().mask(document.querySelectorAll('input'));

  // checker
  var useItemChecker = function useItemChecker(els, onClickOutside) {
    var checkBodyClick = function checkBodyClick(e) {
      var currentEl = e.target;
      while (currentEl) {
        if (els.includes(currentEl)) break;
        currentEl = currentEl.parentNode;
      }
      if (!currentEl) {
        onClickOutside();
        removeBodyChecker();
      }
    };
    function setBodyChecker() {
      document.documentElement.addEventListener('click', checkBodyClick);
    }
    function removeBodyChecker() {
      document.documentElement.removeEventListener('click', checkBodyClick);
    }
    return {
      setBodyChecker: setBodyChecker,
      removeBodyChecker: removeBodyChecker
    };
  };

  // menu && search
  var header = document.getElementById('header');
  var hamburger = document.getElementById('hamburger-toggle');
  var searchBtn = document.getElementById('search-toggle');

  // if (header) {
  //     headerPosition()
  // }

  if (hamburger) {
    hamburger.addEventListener('click', function (event) {
      event.preventDefault();
      if (!hamburger.classList.contains('hamburger--active')) {
        header.classList.add('header--fixed');
        if (window.pageYOffset >= header.getBoundingClientRect().height) {
          header.querySelector('.header__fixed').style.transform = 'translate3d(0px, 0px, 0px)';
          header.querySelector('.header__fixed').style.transition = 'transform 0.2s ease-in-out';
          header.querySelector('.header__fixed').style.position = 'fixed';
        }
        if (!header.classList.contains('header--menu')) {
          header.classList.add('header--menu');
        }
        hamburger.classList.add('hamburger--active');
        bodyFixScroll(1);
      } else {
        if (header.classList.contains('header--menu')) {
          header.classList.remove('header--menu');
        } else if (header.classList.contains('header--search')) {
          header.classList.remove('header--search');
        } else if (header.classList.contains('header--search-menu')) {
          header.classList.remove('header--search-menu');
        } else if (header.classList.contains('header--menu-search')) {
          header.classList.remove('header--menu-search');
        }
        header.classList.remove('header--fixed');
        hamburger.classList.remove('hamburger--active');
        bodyFixScroll();
      }
    });
  }
  if (searchBtn) {
    searchBtn.addEventListener('click', function (event) {
      event.preventDefault();
      if (!header.classList.contains('header--search') && !header.classList.contains('header--search-menu') && !header.classList.contains('header--menu') && !header.classList.contains('header--menu-search')) {
        header.classList.add('header--fixed');
        hamburger.classList.add('hamburger--active');
        header.classList.add('header--search');
        bodyFixScroll(1);
      } else if (header.classList.contains('header--search')) {
        header.classList.remove('header--fixed');
        hamburger.classList.remove('hamburger--active');
        header.classList.remove('header--search');
        bodyFixScroll();
      } else if (header.classList.contains('header--menu')) {
        header.classList.remove('header--menu');
        header.classList.add('header--search-menu');
      } else if (header.classList.contains('header--search-menu')) {
        header.classList.remove('header--search-menu');
        header.classList.add('header--menu-search');
      } else if (header.classList.contains('header--menu-search')) {
        header.classList.remove('header--menu-search');
        header.classList.add('header--search-menu');
      }
    });
  }

  // slim select
  var allSelect = document.querySelectorAll('.js-select');
  if (allSelect) {
    allSelect.forEach(function (item) {
      new SlimSelect({
        select: item
      });
    });
  }

  // input field visibility
  var allModal = document.querySelectorAll('.modal');
  if (allModal) {
    allModal.forEach(function (item) {
      item.addEventListener('click', function (event) {
        var visibilityInputButton = event.target.closest('.input-field__visibility-btn');
        if (!visibilityInputButton) return;
        if (!item.contains(visibilityInputButton)) return;
        event.preventDefault();
        var parent = visibilityInputButton.closest('.input-field');
        var input = parent.querySelector('.input-field__input');
        if (input.type === 'password') {
          visibilityInputButton.classList.add('is--active');
          input.type = 'text';
        } else {
          visibilityInputButton.classList.remove('is--active');
          input.type = 'password';
        }
      });
    });
  }

  // accordeon
  var catalogFilterTrigger = document.querySelectorAll('.catalog-filter__trigger');
  var catalogFilterCheckboxTrigger = document.querySelectorAll('.catalog-filter__checkbox-trigger');
  var catalogSeoTrigger = document.querySelectorAll('.catalog-seo__trigger');
  if (catalogFilterTrigger) {
    catalogFilterTrigger.forEach(function (item) {
      item.addEventListener('click', function (event) {
        event.preventDefault();
        if (!event.target.classList.contains('catalog-filter__clear')) {
          if (!item.parentNode.classList.contains('is--open')) {
            slideDownQna(item, item.nextElementSibling);
          } else {
            slideUpQna(item, item.nextElementSibling);
          }
        }
      });
    });
  }
  if (catalogFilterCheckboxTrigger) {
    catalogFilterCheckboxTrigger.forEach(function (item) {
      item.addEventListener('click', function (event) {
        event.preventDefault();
        if (!item.closest('.catalog-filter__checkbox-group').classList.contains('is--open')) {
          slideDownQna(item, item.parentNode.nextElementSibling);
        } else {
          slideUpQna(item, item.parentNode.nextElementSibling);
        }
      });
    });
  }
  if (catalogSeoTrigger) {
    catalogSeoTrigger.forEach(function (item) {
      item.addEventListener('click', function (event) {
        event.preventDefault();
        if (!item.parentNode.classList.contains('is--open')) {
          slideDownQna(item, item.nextElementSibling);
        } else {
          slideUpQna(item, item.nextElementSibling);
        }
      });
    });
  }

  // range
  var rangeSliders = document.querySelectorAll('.catalog-filter__range-slider');
  if (rangeSliders) {
    rangeSliders.forEach(function (slider) {
      var parent = slider.closest('.catalog-filter__range');
      var inputs = [parent.querySelector('.range-field__input--min'), parent.querySelector('.range-field__input--max')];
      noUiSlider.create(slider, {
        start: [Number(slider.dataset.rangeStart), Number(slider.dataset.rangeEnd)],
        connect: true,
        range: {
          'min': Number(slider.dataset.rangeMin),
          'max': Number(slider.dataset.rangeMax)
        }
      });
      slider.noUiSlider.on('update', function (values, handle) {
        inputs[handle].value = Math.round(values[handle]);
      });
      inputs.forEach(function (input, handle) {
        input.addEventListener('change', function () {
          slider.noUiSlider.setHandle(handle, Math.round(this.value));
        });
        input.addEventListener('keydown', function (e) {
          var values = slider.noUiSlider.get();
          var value = Number(values[handle]);

          // [[handle0_down, handle0_up], [handle1_down, handle1_up]]
          var steps = slider.noUiSlider.steps();

          // [down, up]
          var step = steps[handle];
          var position;

          // 13 is enter,
          // 38 is key up,
          // 40 is key down.
          switch (e.which) {
            case 13:
              slider.noUiSlider.setHandle(handle, Math.round(this.value));
              break;
            case 38:
              // Get step to go increase slider value (up)
              position = step[1];

              // false = no step is set
              if (position === false) {
                position = 1;
              }

              // null = edge of slider
              if (position !== null) {
                slider.noUiSlider.setHandle(handle, Math.round(value + position));
              }
              break;
            case 40:
              position = step[0];
              if (position === false) {
                position = 1;
              }
              if (position !== null) {
                slider.noUiSlider.setHandle(handle, Math.round(value - position));
              }
              break;
          }
        });
      });
    });
  }

  // catalog sections
  var catalogSectionsSelect = document.querySelector('.catalog-sections__select');
  if (catalogSectionsSelect) {
    catalogSectionsSelect.addEventListener('change', function (event) {
      event.preventDefault();
      var arrValue = catalogSectionsSelect.value;
      document.querySelectorAll('.catalog-sections__item').forEach(function (child) {
        return child.classList.remove('is--active');
      });
      document.querySelector('.catalog-sections__item[data-sections-id="' + arrValue + '"]').classList.add('is--active');
    });
  }

  // sort btns
  var sortBtnsSelect = document.querySelector('.c-sort-btns__select select');
  if (sortBtnsSelect) {
    sortBtnsSelect.addEventListener('change', function (event) {
      event.preventDefault();
      var arrValue = sortBtnsSelect.value.split(':');
      document.querySelectorAll('.c-sort-btns__control').forEach(function (child) {
        child.classList.remove('is--active');
        child.classList.remove('is--desc');
      });
      document.querySelector('.c-sort-btns__control[data-sort-id="' + arrValue[0] + '"]').classList.add('is--active');
      if (arrValue[1] == 'desc') {
        document.querySelector('.c-sort-btns__control[data-sort-id="' + arrValue[0] + '"]').classList.add('is--desc');
      }
    });
  }

  // sort view
  var sortViewBtn = document.querySelectorAll('.c-sort-view__control');
  var catalogWrapper = document.querySelector('.catalog__wrapper');
  if (sortViewBtn) {
    sortViewBtn.forEach(function (item, i) {
      item.addEventListener('click', function (event) {
        event.preventDefault();
        var sortID = item.dataset.id;
        sortViewBtn.forEach(function (child) {
          return child.classList.remove('is--active');
        });
        item.classList.add('is--active');
        if (sortID == 1) {
          catalogWrapper.classList.add('catalog__wrapper--wide');
        } else {
          catalogWrapper.classList.remove('catalog__wrapper--wide');
        }
      });
    });
  }

  // filter trigger
  var cFilterTriggerBtn = document.querySelector('.c-filter-trigger__btn');
  var catalogFilter = document.querySelector('.catalog-filter');
  var catalogFilterClear = document.querySelectorAll('.catalog-filter__clear');
  var catalogFilterCheckbox = document.querySelectorAll('.catalog-filter__checkbox');
  if (cFilterTriggerBtn && catalogFilter) {
    cFilterTriggerBtn.addEventListener('click', function (event) {
      event.preventDefault();
      var topOffset = cFilterTriggerBtn.getBoundingClientRect().top + window.scrollY;
      if (!catalogFilter.classList.contains('is--active')) {
        document.documentElement.scrollTo({
          top: topOffset,
          behavior: 'smooth'
        });
        var checkScroll = setInterval(function () {
          if (Math.abs(window.scrollY - topOffset) < 1) {
            clearInterval(checkScroll);
            cFilterTriggerBtn.classList.add('is--active');
            catalogFilter.classList.add('is--active');
            bodyFixScroll(1);
          }
        }, 100);
      } else {
        cFilterTriggerBtn.classList.remove('is--active');
        catalogFilter.classList.remove('is--active');
        bodyFixScroll();
      }
    });
    if (catalogFilterClear) {
      catalogFilterClear.forEach(function (item) {
        item.addEventListener('click', function (event) {
          event.preventDefault();
          var parent = item.closest('.catalog-filter__block');
          var checkboxes = parent.querySelectorAll('.square-checkbox__input');
          var dropdown = parent.querySelectorAll('.catalog-filter__checkbox-group');
          if (checkboxes) {
            checkboxes.forEach(function (child) {
              return child.checked = false;
            });
          }
          item.classList.remove('is--active');
          if (dropdown) {
            dropdown.forEach(function (item) {
              slideUpQna(item, item.querySelector('.catalog-filter__checkbox-dropdown'));
            });
          }
        });
      });
    }
    if (catalogFilterCheckbox) {
      catalogFilterCheckbox.forEach(function (item) {
        item.addEventListener('click', function (event) {
          event.preventDefault();
          var parentBlock = item.closest('.catalog-filter__block');
          var clearBtn = parentBlock.querySelector('.catalog-filter__clear');
          var parent = item.closest('.catalog-filter__checkbox-group');
          var input = item.querySelector('input[type=checkbox]');
          var counter = 0;
          if (parent) {
            var length = parent.querySelectorAll('.catalog-filter__checkbox:not(.catalog-filter__checkbox--all) input[type=checkbox]').length;
            if (item.classList.contains('catalog-filter__checkbox--all')) {
              if (input.checked) {
                input.checked = false;
                parent.querySelectorAll('.catalog-filter__checkbox:not(.catalog-filter__checkbox--all) input[type=checkbox]').forEach(function (child) {
                  return child.checked = false;
                });
                if (parent.classList.contains('is--open')) {
                  slideUpQna(item, parent.querySelector('.catalog-filter__checkbox-dropdown'));
                }
              } else {
                input.checked = true;
                parent.querySelectorAll('.catalog-filter__checkbox:not(.catalog-filter__checkbox--all) input[type=checkbox]').forEach(function (child) {
                  return child.checked = true;
                });
                if (!parent.classList.contains('is--open')) {
                  slideDownQna(item, parent.querySelector('.catalog-filter__checkbox-dropdown'));
                }
              }
            } else {
              if (input.checked) {
                input.checked = false;
                parent.querySelector('.catalog-filter__checkbox--all input[type=checkbox]').checked = false;
              } else {
                input.checked = true;
                parent.querySelectorAll('.catalog-filter__checkbox:not(.catalog-filter__checkbox--all) input[type=checkbox]').forEach(function (child) {
                  if (child.checked) {
                    counter++;
                  }
                });
                if (counter === length) {
                  parent.querySelector('.catalog-filter__checkbox--all input[type=checkbox]').checked = true;
                }
              }
            }
          } else {
            if (input.checked) {
              input.checked = false;
            } else {
              input.checked = true;
            }
          }
          if (clearBtn) {
            var checkboxChecked = parentBlock.querySelectorAll('.catalog-filter__checkbox input[type=checkbox]:checked').length;
            if (checkboxChecked > 0) {
              clearBtn.classList.add('is--active');
            } else {
              clearBtn.classList.remove('is--active');
            }
          }
        });
      });
    }
  }

  // quantity
  var quantityButtonMinus = document.querySelectorAll('.c-quantity__btn--minus');
  var quantityButtonPlus = document.querySelectorAll('.c-quantity__btn--plus');
  if (quantityButtonMinus) {
    quantityButtonMinus.forEach(function (item) {
      item.addEventListener('click', function (event) {
        event.preventDefault();
        var parent = item.closest('.c-quantity');
        var input = parent.querySelector('.c-quantity__value');
        var currentValue = input.value;
        if (currentValue > '0') {
          input.value = input.value * 1 - 1;
        } else {
          input.value = input.value;
        }
        if (input.value == '0') {
          parent.querySelector('.c-quantity__btn--minus').setAttribute('disabled', 'disabled');
        }
      });
    });
  }
  if (quantityButtonPlus) {
    quantityButtonPlus.forEach(function (item) {
      item.addEventListener('click', function (event) {
        event.preventDefault();
        var parent = item.closest('.c-quantity');
        var input = parent.querySelector('.c-quantity__value');
        var currentValue = input.value;
        if (currentValue >= '999') {
          input.value = input.value;
        } else {
          input.value = input.value * 1 + 1;
        }
        if (parent.querySelector('.c-quantity__btn--minus').hasAttribute('disabled')) {
          parent.querySelector('.c-quantity__btn--minus').removeAttribute('disabled');
        }
      });
    });
  }

  // quick view dropdown
  var quickViewTrigger = document.querySelectorAll('.quick-view-options__trigger');
  if (quickViewTrigger) {
    quickViewTrigger.forEach(function (item) {
      item.addEventListener('click', function (event) {
        event.preventDefault();
        var parent = item.closest('.quick-view-options__item-top');
        var dropdown = parent.querySelector('.quick-view-options__dropdown');
        if (item.classList.contains('is--open')) {
          slideUpSingleQna(item, dropdown);
        } else {
          slideDownSingleQna(item, dropdown);
        }
      });
    });
  }

  // info dropdown
  var smInfoTrigger = document.querySelectorAll('.c-info__trigger');
  if (smInfoTrigger) {
    smInfoTrigger.forEach(function (item) {
      var close = function close() {
        var parent = item.closest('.c-info');
        parent.classList.remove('is--active');
      };
      var itemChecker = useItemChecker([item.parentNode], close);
      item.addEventListener('click', function (event) {
        event.preventDefault();
        if (window.matchMedia('(hover: none)').matches) {
          var parent = item.closest('.c-info');
          if (!parent.classList.contains('is--active')) {
            parent.classList.add('is--active');
            itemChecker.setBodyChecker();
          } else {
            close();
          }
        }
      });
    });
  }
  function adjustChildPosition() {
    if (smInfoTrigger) {
      smInfoTrigger.forEach(function (item) {
        var parent = item.closest('.c-info');
        var dropdown = parent.querySelector('.c-info__dropdown');
        var parentOffsetLeft = item.getBoundingClientRect().left - Number(14);
        dropdown.style.left = "-".concat(parentOffsetLeft, "px");
      });
    }
  }

  // share
  var shareTrigger = document.querySelectorAll('.c-share__trigger');
  if (shareTrigger) {
    shareTrigger.forEach(function (item) {
      item.addEventListener('click', function (event) {
        event.preventDefault();
        var parent = item.closest('.c-share');
        if (parent.classList.contains('is--active')) {
          parent.classList.remove('is--active');
        } else {
          parent.classList.add('is--active');
        }
      });
    });
  }

  // main about content more
  var mainAboutContentMore = document.querySelector('.main-about__content-more');
  if (mainAboutContentMore) {
    mainAboutContentMore.addEventListener('click', function (event) {
      event.preventDefault();
      var parent = mainAboutContentMore.closest('.main-about__block');
      var contentDropdown = parent.querySelector('.main-about__content--dropdown');
      var spoiler = parent.querySelector('.main-about__spoiler');
      if (window.innerWidth >= 768) {
        if (!contentDropdown.classList.contains('is--open')) {
          slideDownQna(mainAboutContentMore, spoiler, 200);
          mainAboutContentMore.querySelector('span').innerHTML = mainAboutContentMore.dataset.end;
        } else {
          slideUpQna(mainAboutContentMore, spoiler, 50);
          mainAboutContentMore.querySelector('span').innerHTML = mainAboutContentMore.dataset.start;
        }
      } else {
        if (!parent.classList.contains('is--open')) {
          slideDownQna(mainAboutContentMore, contentDropdown, 200);
          mainAboutContentMore.querySelector('span').innerHTML = mainAboutContentMore.dataset.end;
        } else {
          slideUpQna(mainAboutContentMore, contentDropdown, 200);
          mainAboutContentMore.querySelector('span').innerHTML = mainAboutContentMore.dataset.start;
        }
      }
    });
  }

  // search example
  var searchExampleLink = document.querySelector('.page-search__help a');
  if (searchExampleLink) {
    searchExampleLink.addEventListener('click', function (event) {
      event.preventDefault();
      var parent = document.querySelector('.page-search__form');
      var input = parent.querySelector('.page-search__input');
      var textToType = searchExampleLink.dataset.value;
      var index = 0;
      if (input.value != textToType) {
        input.value = '';
        var typeText = function typeText() {
          if (index < textToType.length) {
            input.value += textToType[index];
            index++;
            setTimeout(typeText, 100);
          }
        };
        typeText();
      }
    });
  }

  // personal sale switch
  var personalSaleInner = document.querySelectorAll('.personal-sale__inner');
  var personalSaleLink = document.querySelectorAll('.personal-sale__link');
  if (personalSaleLink && personalSaleInner) {
    personalSaleLink.forEach(function (item) {
      item.addEventListener('click', function (event) {
        event.preventDefault();
        if (item.dataset.settings == 'hide') {
          personalSaleLink.forEach(function (child) {
            if (child.dataset.settings == 'hide') {
              child.classList.add('is--hidden');
            } else if (child.dataset.settings == 'show') {
              child.classList.remove('is--hidden');
            }
          });
          personalSaleInner.forEach(function (child) {
            return child.classList.add('is--hidden');
          });
        }
      });
    });
  }

  // main slider
  var mainSlider = document.querySelector('.main__slider .swiper');
  if (mainSlider) {
    var myMainSlider = new Swiper(mainSlider, {
      slidesPerView: 1,
      loop: true,
      speed: 800,
      parallax: true,
      watchSlidesProgress: true,
      pagination: {
        el: '.swiper-pagination',
        type: 'bullets',
        clickable: true,
        renderBullet: function renderBullet(index, className) {
          return '<span class="' + className + '">' + '0' + (index + 1) + "</span>";
        }
      },
      breakpoints: {
        0: {
          pagination: {
            renderBullet: function renderBullet(index, className) {
              return '<span class="' + className + '">' + "</span>";
            }
          }
        },
        768: {
          pagination: {
            renderBullet: function renderBullet(index, className) {
              return '<span class="' + className + '">' + '0' + (index + 1) + "</span>";
            }
          }
        }
      },
      on: {
        beforeSlideChangeStart: function beforeSlideChangeStart() {
          mainSlider.style.pointerEvents = 'none';
        },
        slideChangeTransitionEnd: function slideChangeTransitionEnd() {
          mainSlider.style.pointerEvents = 'auto';
        }
      }
    });
  }

  // hubs slider
  var hubsSlider = document.querySelector('.catalog-hubs__slider .swiper');
  if (hubsSlider) {
    var myHubsSlider = new Swiper(hubsSlider, {
      slidesPerView: 'auto',
      spaceBetween: 4,
      speed: 500,
      navigation: {
        prevEl: hubsSlider.closest('.catalog-hubs__slider').querySelector('.swiper-button-prev'),
        nextEl: hubsSlider.closest('.catalog-hubs__slider').querySelector('.swiper-button-next')
      },
      breakpoints: {
        0: {
          spaceBetween: 2
        },
        1024: {
          spaceBetween: 4
        }
      }
    });
  }

  // catalog card slider
  var catalogCardSlider = document.querySelectorAll('.catalog-card__slider .swiper');
  if (catalogCardSlider) {
    catalogCardSlider.forEach(function (slider) {
      var myCatalogCardSlider = new Swiper(slider, {
        slidesPerView: 1,
        loop: true,
        pagination: {
          el: slider.closest('.catalog-card__slider').querySelector('.swiper-pagination'),
          clickable: true
        },
        lazy: {
          loadPrevNext: true
        },
        watchSlidesVisibility: true,
        watchSlidesProgress: true,
        on: {
          init: function init() {
            var activeSlide = this.slides[this.activeIndex];
            var activeSlideImg = activeSlide.querySelector('img');
            if (activeSlideImg.dataset.src) {
              activeSlideImg.src = activeSlideImg.dataset.src;
              activeSlideImg.removeAttribute('data-src');
            }
          },
          transitionStart: function transitionStart() {
            var activeSlide = this.slides[this.activeIndex];
            var activeSlideImg = activeSlide.querySelector('img');
            if (activeSlideImg.dataset.src) {
              activeSlideImg.src = activeSlideImg.dataset.src;
              activeSlideImg.removeAttribute('data-src');
            }
          }
        }
      });
    });
  }

  // mm about slider
  var mmAboutSlider = document.querySelectorAll('.mm-about__slider .swiper');
  if (mmAboutSlider) {
    mmAboutSlider.forEach(function (slider) {
      var myMmAboutSlider = new Swiper(slider, {
        slidesPerView: 3,
        spaceBetween: 28,
        // loop: true,
        navigation: {
          prevEl: slider.closest('.mm-about__slider').querySelector('.swiper-button-prev'),
          nextEl: slider.closest('.mm-about__slider').querySelector('.swiper-button-next')
        },
        pagination: {
          el: slider.closest('.mm-about__slider').querySelector('.swiper-controls .swiper-pagination'),
          type: 'fraction',
          renderFraction: function renderFraction(currentClass, totalClass) {
            return '<span class="' + currentClass + '"></span>' + '<span class="' + totalClass + '"></span>';
          }
        },
        breakpoints: {
          0: {
            slidesPerView: 'auto',
            spaceBetween: 18,
            pagination: {
              type: 'bullets',
              clickable: true
            }
          },
          768: {
            slidesPerView: 2,
            spaceBetween: 16,
            pagination: {
              type: 'bullets',
              clickable: true
            }
          },
          1024: {
            slidesPerView: 3,
            spaceBetween: 18,
            pagination: {
              type: 'fraction',
              clickable: false
            }
          },
          1600: {
            spaceBetween: 28
          }
        }
      });
    });
  }

  // realized objects slider
  var realizedObjectsSlider = document.querySelectorAll('.realized-objects__slider .swiper');
  if (realizedObjectsSlider) {
    realizedObjectsSlider.forEach(function (slider) {
      var myRealizedObjectsSlider = new Swiper(slider, {
        slidesPerView: 'auto',
        spaceBetween: 28,
        navigation: {
          prevEl: slider.closest('.realized-objects__slider').querySelector('.swiper-button-prev'),
          nextEl: slider.closest('.realized-objects__slider').querySelector('.swiper-button-next')
        },
        pagination: {
          el: slider.closest('.realized-objects__slider').querySelector('.swiper-controls .swiper-pagination'),
          type: 'fraction',
          renderFraction: function renderFraction(currentClass, totalClass) {
            return '<span class="' + currentClass + '"></span>' + '<span class="' + totalClass + '"></span>';
          }
        },
        breakpoints: {
          0: {
            spaceBetween: 18,
            pagination: {
              type: 'bullets',
              clickable: true
            }
          },
          768: {
            spaceBetween: 16,
            pagination: {
              type: 'bullets',
              clickable: true
            }
          },
          1024: {
            spaceBetween: 18,
            pagination: {
              type: 'fraction',
              clickable: false
            }
          },
          1600: {
            spaceBetween: 28
          }
        }
      });
    });
  }

  // news slider
  var newsSlider = document.querySelectorAll('.news__slider .swiper');
  if (newsSlider) {
    newsSlider.forEach(function (slider) {
      var myNewsSlider = new Swiper(slider, {
        slidesPerView: 3,
        spaceBetween: 28,
        // loop: true,
        navigation: {
          prevEl: slider.closest('.news__slider').querySelector('.swiper-button-prev'),
          nextEl: slider.closest('.news__slider').querySelector('.swiper-button-next')
        },
        pagination: {
          el: slider.closest('.news__slider').querySelector('.swiper-controls .swiper-pagination'),
          type: 'fraction',
          renderFraction: function renderFraction(currentClass, totalClass) {
            return '<span class="' + currentClass + '"></span>' + '<span class="' + totalClass + '"></span>';
          }
        },
        breakpoints: {
          0: {
            slidesPerView: 'auto',
            spaceBetween: 18,
            pagination: {
              type: 'bullets',
              clickable: true
            }
          },
          768: {
            slidesPerView: 3,
            spaceBetween: 16,
            pagination: {
              type: 'bullets',
              clickable: true
            }
          },
          1024: {
            slidesPerView: 3,
            spaceBetween: 18,
            pagination: {
              type: 'fraction',
              clickable: false
            }
          },
          1600: {
            slidesPerView: 3,
            spaceBetween: 28
          }
        }
      });
    });
  }

  // inst collection slider
  var instCollectionSlider = document.querySelectorAll('.inst-collection__slider .swiper');
  if (instCollectionSlider) {
    instCollectionSlider.forEach(function (slider) {
      var myInstCollectionSlider = new Swiper(slider, {
        slidesPerView: 6,
        navigation: {
          prevEl: slider.closest('.inst-collection__slider').querySelector('.swiper-button-prev'),
          nextEl: slider.closest('.inst-collection__slider').querySelector('.swiper-button-next')
        },
        pagination: {
          el: slider.closest('.inst-collection__slider').querySelector('.swiper-controls .swiper-pagination'),
          type: 'fraction',
          renderFraction: function renderFraction(currentClass, totalClass) {
            return '<span class="' + currentClass + '"></span>' + '<span class="' + totalClass + '"></span>';
          }
        },
        breakpoints: {
          0: {
            slidesPerView: 2,
            slidesPerGroup: 2,
            grid: {
              fill: "row",
              rows: 2
            },
            pagination: {
              type: 'bullets',
              clickable: true
            }
          },
          768: {
            slidesPerView: 4,
            pagination: {
              type: 'bullets',
              clickable: true
            }
          },
          1024: {
            slidesPerView: 4,
            pagination: {
              type: 'fraction',
              clickable: false
            }
          },
          1200: {
            slidesPerView: 5,
            pagination: {
              type: 'fraction',
              clickable: false
            }
          },
          1600: {
            slidesPerView: 6
          }
        }
      });
    });
  }

  // contacts slider
  var contactsSlider = document.querySelector('.contacts-slider .swiper');
  if (contactsSlider) {
    var myContactsSlider = new Swiper(contactsSlider, {
      slidesPerView: 1,
      loop: true,
      pagination: {
        el: '.swiper-pagination',
        type: 'bullets',
        clickable: true
      }
    });
  }

  // quick view slider
  var quickViewGalleryThumb = document.querySelector('.quick-view__slider .gallery-thumbs');
  var quickViewgalleryMain = document.querySelector('.quick-view__slider .gallery-main');
  if (quickViewGalleryThumb && quickViewgalleryMain) {
    var myQuickViewGalleryThumb = new Swiper(quickViewGalleryThumb, {
      slidesPerView: 6,
      spaceBetween: 5,
      freeMode: true,
      watchSlidesVisibility: true,
      watchSlidesProgress: true
    });
    var myQuickViewGalleryMain = new Swiper(quickViewgalleryMain, {
      slidesPerView: 1,
      spaceBetween: 0,
      loop: true,
      preloadImages: false,
      thumbs: {
        swiper: myQuickViewGalleryThumb
      }
    });
    quickViewGalleryThumb.querySelectorAll('.swiper-slide').forEach(function (item) {
      item.addEventListener('click', function () {
        quickViewGalleryThumb.querySelectorAll('.swiper-slide').forEach(function (child) {
          return child.classList.remove('is--active');
        });
        item.classList.add('is--active');
        myQuickViewGalleryMain.slideTo(item.dataset.index);
      });
    });
    myQuickViewGalleryMain.on('slideChange', function () {
      myQuickViewGalleryThumb.slideTo(myQuickViewGalleryMain.realIndex);
      quickViewGalleryThumb.querySelectorAll('.swiper-slide').forEach(function (child) {
        return child.classList.remove('is--active');
      });
      quickViewGalleryThumb.querySelectorAll('.swiper-slide')[myQuickViewGalleryMain.realIndex].classList.add('is--active');
    });
  }

  // ideas tooltip
  var ideasTooltips = document.querySelectorAll('.ideas-tooltip');
  var ideasBullets = document.querySelectorAll('.ideas__img-bullet');
  var ideasImg = document.querySelectorAll('.ideas__img');
  var ideasPopupImg = document.querySelectorAll('.ideas-popup__img');
  if (ideasBullets && ideasImg && ideasPopupImg) {
    ideasBullets.forEach(function (item) {
      reload(item);
    });

    // if (ideasTooltips) {
    //     ideasTooltips.forEach(ideasTooltip => {
    //         ideasTooltip.addEventListener('mouseover', () => {
    //             ideasTooltip.style.display = 'block';

    //             document.querySelector('.ideas__img-bullet[data-current="true"]').classList.add('is--hover');

    //             if (document.querySelector('.ideas__img[data-current="true"]')) {
    //                 document.querySelector('.ideas__img[data-current="true"]').classList.add('is--hover')
    //             }
    //             if (document.querySelector('.ideas-popup__img[data-current="true"]')) {
    //                 document.querySelector('.ideas-popup__img[data-current="true"]').classList.add('is--hover')
    //             }
    //         });

    //         ideasTooltip.addEventListener('mouseout', () => {
    //             ideasTooltip.style.position = 'absolute';
    //             ideasTooltip.style.display = 'none';

    //             document.querySelectorAll('.ideas__img-bullet').forEach(function(child) {
    //                 return child.classList.remove('is--hover');
    //             });

    //             document.querySelectorAll('.ideas__img').forEach(function(child) {
    //                 return child.classList.remove('is--hover');
    //             });

    //             document.querySelectorAll('.ideas-popup__img').forEach(function(child) {
    //                 return child.classList.remove('is--hover');
    //             });
    //         });
    //     });
    // }

    document.body.addEventListener('mouseover', function (event) {
      var ideasTooltipClosest = event.target.closest('.ideas-tooltip');
      var ideasTooltip = event.target.classList.contains('ideas-tooltip');
      if (ideasTooltipClosest || ideasTooltip) {
        if (ideasTooltipClosest) {
          ideasTooltipClosest.style.display = 'block';
          if (document.querySelector('.ideas-popup__img[data-current="true"]')) {
            ideasTooltipClosest.style.position = 'fixed';
          }
        }
        if (ideasTooltip) {
          event.target.style.display = 'block';
          if (document.querySelector('.ideas-popup__img[data-current="true"]')) {
            event.target.style.position = 'fixed';
          }
        }
        document.querySelector('.ideas__img-bullet[data-current="true"]').classList.add('is--hover');
        if (document.querySelector('.ideas__img[data-current="true"]')) {
          document.querySelector('.ideas__img[data-current="true"]').classList.add('is--hover');
        }
        if (document.querySelector('.ideas-popup__img[data-current="true"]')) {
          document.querySelector('.ideas-popup__img[data-current="true"]').classList.add('is--hover');
        }
      }
    });
    document.body.addEventListener('mouseout', function (event) {
      var ideasTooltipClosest = event.target.closest('.ideas-tooltip');
      var ideasTooltip = event.target.classList.contains('ideas-tooltip');
      if (ideasTooltipClosest || ideasTooltip) {
        if (ideasTooltipClosest) {
          ideasTooltipClosest.style.position = 'absolute';
          ideasTooltipClosest.style.display = 'none';
        }
        if (ideasTooltip) {
          event.target.style.position = 'absolute';
          event.target.style.display = 'none';
        }
        document.querySelectorAll('.ideas__img-bullet').forEach(function (child) {
          return child.classList.remove('is--hover');
        });
        document.querySelectorAll('.ideas__img').forEach(function (child) {
          return child.classList.remove('is--hover');
        });
        document.querySelectorAll('.ideas-popup__img').forEach(function (child) {
          return child.classList.remove('is--hover');
        });
      }
    });
    var existIdeasList = [];

    // ideasBullets.forEach(item => {
    //     item.addEventListener('mouseover', () => {
    //         let top = window.pageYOffset + item.getBoundingClientRect().top - Number(10) + 'px'
    //         let left = item.getBoundingClientRect().left + item.getBoundingClientRect().width + Number(34) + 'px'

    //         if (item.closest('.ideas-popup')) {
    //             ideasTooltip.style.position = 'fixed'
    //         }

    //         ideasTooltip.style.display = 'block'
    //         ideasTooltip.style.top = top
    //         ideasTooltip.style.left = left

    //         ideasBullets.forEach(child => child.removeAttribute('data-current'))
    //         item.dataset.current = true
    //         ideasImg.forEach(child => child.removeAttribute('data-current'))
    //         item.closest('.ideas__img').dataset.current = true
    //     })

    //     item.addEventListener('mouseout', () => {
    //         ideasTooltip.style.position = 'absolute'
    //         ideasTooltip.style.display = 'none'
    //     })
    // })

    // ideasTooltip.forEach(item => {
    //     item.addEventListener('mouseover', () => {
    //         ideasTooltip.style.display = 'block'

    //         document.querySelector('.ideas__img-bullet[data-current="true"]').classList.add('is--hover')
    //         document.querySelector('.ideas__img[data-current="true"]').classList.add('is--hover')
    //     })

    //     item.addEventListener('mouseout', () => {
    //         ideasTooltip.style.position = 'absolute'
    //         ideasTooltip.style.display = 'none'

    //         ideasBullets.forEach(child => child.classList.remove('is--hover'))
    //         ideasImg.forEach(child => child.classList.remove('is--hover'))
    //     })
    // })
  }

  // ideas slider
  var ideasSlider = document.querySelectorAll('.ideas__slider .swiper');
  if (ideasSlider) {
    ideasSlider.forEach(function (slider) {
      var myIdeasSlider = new Swiper(slider, {
        slidesPerView: 'auto',
        spaceBetween: 28,
        navigation: {
          prevEl: slider.closest('.ideas__slider').querySelector('.swiper-button-prev'),
          nextEl: slider.closest('.ideas__slider').querySelector('.swiper-button-next')
        },
        pagination: {
          el: slider.closest('.ideas__slider').querySelector('.swiper-controls .swiper-pagination'),
          type: 'fraction',
          renderFraction: function renderFraction(currentClass, totalClass) {
            return '<span class="' + currentClass + '"></span>' + '<span class="' + totalClass + '"></span>';
          }
        },
        breakpoints: {
          0: {
            spaceBetween: 18,
            pagination: {
              type: 'bullets',
              clickable: true
            }
          },
          768: {
            spaceBetween: 16,
            pagination: {
              type: 'bullets',
              clickable: true
            }
          },
          1024: {
            spaceBetween: 28,
            pagination: {
              type: 'fraction',
              clickable: false
            }
          }
        }
      });
    });
  }

  // ideas popup slider
  var ideasPopupSlider = document.querySelector('.ideas-popup__slider .swiper');
  if (ideasPopupSlider) {
    var myIdeasPopupSlider = new Swiper(ideasPopupSlider, {
      slidesPerView: 'auto',
      spaceBetween: 28,
      navigation: {
        prevEl: '.swiper-button-prev',
        nextEl: '.swiper-button-next'
      },
      pagination: {
        el: '.swiper-pagination',
        type: 'fraction',
        renderFraction: function renderFraction(currentClass, totalClass) {
          return '<span class="' + currentClass + '"></span>' + '<span class="' + totalClass + '"></span>';
        }
      },
      breakpoints: {
        0: {
          spaceBetween: 0,
          pagination: {
            type: 'bullets',
            clickable: true
          }
        },
        768: {
          spaceBetween: 0,
          pagination: {
            type: 'bullets',
            clickable: true
          }
        },
        1024: {
          spaceBetween: 28,
          pagination: {
            type: 'fraction',
            clickable: false
          }
        }
      },
      on: {
        init: function init() {
          if (ideasPopupSlider.querySelectorAll('.swiper-slide').length < 2) {
            ideasPopupSlider.classList.add('swiper-single');
          }
        }
      }
    });
  }

  // ideas popup
  var ideasPopup = document.getElementById('ideas-popup');
  var ideasPopupTrigger = document.querySelectorAll('.ideas-popup-trigger');
  var ideasPopupClose = document.querySelectorAll('.ideas-popup__close');
  if (ideasPopup && ideasPopupTrigger && ideasPopupClose) {
    ideasPopup.addEventListener('click', function (event) {
      if (event.target.classList.contains('ideas-popup') || event.target.classList.contains('ideas-popup__wrap')) {
        event.preventDefault();
        if (ideasPopup.classList.contains('is--active')) {
          ideasPopup.classList.remove('is--active');
          bodyFixScroll();
        }
      }
    });
    ideasPopupTrigger.forEach(function (item, i) {
      item.addEventListener('click', function (event) {
        console.log(event.target);
        if (!event.target.classList.contains('ideas__img-bullet') || !event.target.closest('.ideas__img-bullet') || !event.target.classList.contains('products-used-trigger') || !event.target.closest('.products-used-trigger')) {
          event.preventDefault();
          var url = item.dataset.url;
          // var el = item.dataset.el;

          $.ajax({
            url: url,
            success: function success(data) {
              document.getElementById("ideas-popup__slider-wrapper").innerHTML = data;
              if (!ideasPopup.classList.contains('is--active')) {
                ideasPopup.classList.add('is--active');
                bodyFixScroll(1);
              }

              // ideas popup slider
              var ideasPopupSlider = document.querySelector('#ideas-popup__slider-wrapper .swiper');
              if (ideasPopupSlider) {
                var myIdeasPopupSlider = new Swiper(ideasPopupSlider, {
                  slidesPerView: 'auto',
                  spaceBetween: 28,
                  navigation: {
                    prevEl: '.swiper-button-prev',
                    nextEl: '.swiper-button-next'
                  },
                  pagination: {
                    el: '.swiper-pagination',
                    type: 'fraction',
                    renderFraction: function renderFraction(currentClass, totalClass) {
                      return '<span class="' + currentClass + '"></span>' + '<span class="' + totalClass + '"></span>';
                    }
                  },
                  breakpoints: {
                    0: {
                      spaceBetween: 0,
                      pagination: {
                        type: 'bullets',
                        clickable: true
                      }
                    },
                    768: {
                      spaceBetween: 0,
                      pagination: {
                        type: 'bullets',
                        clickable: true
                      }
                    },
                    1024: {
                      spaceBetween: 28,
                      pagination: {
                        type: 'fraction',
                        clickable: false
                      }
                    }
                  },
                  on: {
                    init: function init() {
                      if (ideasPopupSlider.querySelectorAll('.swiper-slide').length < 2) {
                        ideasPopupSlider.classList.add('swiper-single');
                      }
                    }
                  }
                });
              }
              var newImgBullets = document.querySelectorAll('#ideas-popup__slider-wrapper a.ideas__img-bullet');
              newImgBullets.forEach(function (newImgBullet, i) {
                reload(newImgBullet);
              });
              var popupProductsUsedTrigger = document.querySelectorAll('#ideas-popup__slider-wrapper .products-used-trigger');
              var productsUsed = document.getElementById('products-used');
              var productsUsedClose = document.querySelectorAll('.products-used__close');
              if (productsUsed && popupProductsUsedTrigger && productsUsedClose) {
                productsUsed.addEventListener('click', function (event) {
                  if (event.target.classList.contains('products-used') || event.target.classList.contains('products-used__wrap')) {
                    event.preventDefault();
                    console.log("herer");
                    if (productsUsed.classList.contains('is--active')) {
                      productsUsed.classList.remove('is--active');
                      bodyFixScroll();
                    }
                  }
                });
                popupProductsUsedTrigger.forEach(function (item, i) {
                  item.addEventListener('click', function (event) {
                    if (window.innerWidth <= 1023) {
                      event.preventDefault();
                      console.log("herer2");
                      var url = item.dataset.url;
                      var id = item.dataset.id;
                      $.ajax({
                        url: url,
                        success: function success(data) {
                          document.getElementById("products-used__items").innerHTML = data;
                          if (!productsUsed.classList.contains('is--active')) {
                            productsUsed.classList.add('is--active');
                            bodyFixScroll(1);
                          }
                        }
                      });
                    }
                  });
                });
                productsUsedClose.forEach(function (item) {
                  item.addEventListener('click', function () {
                    if (productsUsed.classList.contains('is--active')) {
                      productsUsed.classList.remove('is--active');
                      bodyFixScroll();
                    }
                  });
                });
              }
            }
          });
        }
      });
    });
    ideasPopupClose.forEach(function (item) {
      item.addEventListener('click', function () {
        if (ideasPopup.classList.contains('is--active')) {
          ideasPopup.classList.remove('is--active');
          bodyFixScroll();
        }
      });
    });
  }

  // products used popup
  var productsUsed = document.getElementById('products-used');
  var productsUsedTrigger = document.querySelectorAll('.products-used-trigger');
  var productsUsedClose = document.querySelectorAll('.products-used__close');
  if (productsUsed && productsUsedTrigger && productsUsedClose) {
    productsUsed.addEventListener('click', function (event) {
      if (event.target.classList.contains('products-used') || event.target.classList.contains('products-used__wrap')) {
        event.preventDefault();
        console.log("herer");
        if (productsUsed.classList.contains('is--active')) {
          productsUsed.classList.remove('is--active');
          bodyFixScroll();
        }
      }
    });
    productsUsedTrigger.forEach(function (item, i) {
      item.addEventListener('click', function (event) {
        if (window.innerWidth <= 1023) {
          event.preventDefault();
          console.log("herer2");
          var url = item.dataset.url;
          var id = item.dataset.id;
          $.ajax({
            url: url,
            success: function success(data) {
              document.getElementById("products-used__items").innerHTML = data;
              if (!productsUsed.classList.contains('is--active')) {
                productsUsed.classList.add('is--active');
                bodyFixScroll(1);
              }
            }
          });
        }
      });
    });
    productsUsedClose.forEach(function (item) {
      item.addEventListener('click', function () {
        if (productsUsed.classList.contains('is--active')) {
          productsUsed.classList.remove('is--active');
          bodyFixScroll();
        }
      });
    });
  }

  // popup
  var popup = document.querySelectorAll('.popup');
  var popupBtn = document.querySelectorAll('.popup-btn');
  var popupClose = document.querySelectorAll('.popup__close');
  if (popup && popupBtn && popupClose) {
    // popup
    popup.forEach(function (item) {
      item.addEventListener('click', function (event) {
        if (event.target.classList.contains('popup') || event.target.classList.contains('popup__wrap')) {
          event.preventDefault();
          document.querySelectorAll('.popup.is--active').forEach(function (child) {
            return child.classList.remove('is--active');
          });
          bodyFixScroll();
        }
      });
    });

    // popup btn
    popupBtn.forEach(function (item, i) {
      item.addEventListener('click', function (event) {
        event.preventDefault();
        var modalID = item.dataset.id;
        document.querySelectorAll('.popup.is--active').forEach(function (child) {
          return child.classList.remove('is--active');
        });
        document.getElementById(modalID).classList.add('is--active');
        bodyFixScroll(1);
      });
    });

    // popup close
    popupClose.forEach(function (item) {
      item.addEventListener('click', function (event) {
        event.preventDefault();
        document.querySelectorAll('.popup.is--active').forEach(function (child) {
          return child.classList.remove('is--active');
        });
        bodyFixScroll();
      });
    });
  }

  // modal
  var modal = document.querySelectorAll('.modal');
  var modalBtn = document.querySelectorAll('.modal-btn');
  var modalClose = document.querySelectorAll('.modal__close');
  var modalOverlay = document.querySelectorAll('.modal__overlay');
  if (modal && modalBtn && modalClose && modalOverlay) {
    // modal btn
    modalBtn.forEach(function (item, i) {
      item.addEventListener('click', function (event) {
        event.preventDefault();
        var modalID = item.dataset.id;
        document.querySelectorAll('.modal.modal--active').forEach(function (child) {
          return child.classList.remove('modal--active');
        });
        document.getElementById(modalID).classList.add('modal--active');
        bodyFixScroll(1);
      });
    });

    // modal close
    modalClose.forEach(function (item) {
      item.addEventListener('click', function () {
        document.querySelectorAll('.modal.modal--active').forEach(function (child) {
          return child.classList.remove('modal--active');
        });
        bodyFixScroll();
      });
    });

    // modal overlay
    modalOverlay.forEach(function (item) {
      item.addEventListener('click', function () {
        document.querySelectorAll('.modal.modal--active').forEach(function (child) {
          return child.classList.remove('modal--active');
        });
        bodyFixScroll();
      });
    });
  }

  // modal switch
  var modalTabs = document.querySelectorAll('.modal__tab');
  if (modalTabs) {
    modalTabs.forEach(function (item, index) {
      item.addEventListener('click', function (event) {
        event.preventDefault();
        var parent = item.closest('.modal__wrapper');
        parent.querySelectorAll('.modal__tab').forEach(function (child) {
          return child.classList.remove('is--active');
        });
        parent.querySelectorAll('.modal__left').forEach(function (child) {
          return child.classList.remove('is--active');
        });
        parent.querySelectorAll('.modal__right').forEach(function (child) {
          return child.classList.remove('is--active');
        });
        item.classList.add('is--active');
        if (item.dataset.modalTab === 'left') {
          parent.querySelector('.modal__left').classList.add('is--active');
        } else if (item.dataset.modalTab === 'right') {
          parent.querySelector('.modal__right').classList.add('is--active');
        }
      });
    });
  }

  // modal auth change
  var modalAuthTrigger = document.querySelectorAll('.modal-auth-trigger');
  function modalAuthChange() {
    if (modalAuthTrigger) {
      modalAuthTrigger.forEach(function (item) {
        item.addEventListener('click', function (event) {
          event.preventDefault();
          var parent = item.closest('.modal__main');
          var formId = item.dataset.authForm;
          parent.querySelectorAll('.modal__holder').forEach(function (child) {
            return child.classList.remove('is--active');
          });
          parent.querySelector('.modal__holder[data-auth-form=' + formId + ']').classList.add('is--active');
        });
      });
    }
  }
  modalAuthChange();

  // quick view
  var quickView = document.getElementById('quick-view');
  var quickViewBtn = document.querySelectorAll('.quick-view-btn');
  var quickViewClose = document.querySelector('.quick-view__close');
  if (quickView && quickViewBtn && quickViewClose) {
    // quick view
    quickView.addEventListener('click', function (event) {
      if (event.target.classList.contains('quick-view') || event.target.classList.contains('quick-view__wrap')) {
        event.preventDefault();
        quickView.classList.remove('is--active');
        bodyFixScroll();
      }
    });

    // quick view btn
    quickViewBtn.forEach(function (item, i) {
      item.addEventListener('click', function (event) {
        event.preventDefault();
        quickView.classList.add('is--active');
        bodyFixScroll(1);
      });
    });

    // quick view close
    quickViewClose.addEventListener('click', function (event) {
      event.preventDefault();
      quickView.classList.remove('is--active');
      bodyFixScroll();
    });
  }

  // scroll
  var prevScrollpos = window.pageYOffset;

  // if (prevScrollpos >= header.getBoundingClientRect().height) {
  //     if (!header.classList.contains('header--transparent')) {
  //         header.classList.add('header--transparent')
  //         header.classList.add('header--temp')
  //     }
  // }

  window.addEventListener('scroll', function () {
    var currentScrollPos = window.pageYOffset;
    if (prevScrollpos > currentScrollPos || prevScrollpos <= 0) {// if up
      // if (header) {
      //     if (!header.classList.contains('is--loading') && !header.classList.contains('header--search') && !header.classList.contains('header--menu') && !header.classList.contains('header--search-menu') && !header.classList.contains('header--menu-search')) {
      //         headerFixedUp()
      //     }
      // }
    } else {// if down
      // if (header) {
      //     if (!header.classList.contains('is--loading') && !header.classList.contains('header--search') && !header.classList.contains('header--menu') && !header.classList.contains('header--search-menu') && !header.classList.contains('header--menu-search')) {
      //         headerFixedDown()
      //     }
      // }
    }
    prevScrollpos = currentScrollPos;
  });

  // resize
  window.addEventListener('resize', function () {
    // if (header) {
    //     headerPosition()
    // }
  });
  window.addEventListener('load', function () {
    if (window.innerWidth <= 767) {
      adjustChildPosition();
    }
  });
  window.addEventListener('resize', function () {
    if (window.innerWidth <= 767) {
      adjustChildPosition();
    }
  });

  // ajax
  var global = {};
  $(document).on('keyup', '.search__input', function () {
    var searchDropdown = document.querySelector('.search__dropdown');
    var searchDropdownContent = document.querySelector('.search__list');
    var $form = $(this).parents('form');
    var $val = $(this).val();
    if ($val.length > 2) {
      $.ajax({
        url: $form.data('suggest-url'),
        context: $($form.data('ajaxblock')),
        data: {
          ajax: 'Y',
          q: $(this).val()
        },
        success: function success(data) {
          $(this).html(data);
        },
        timeout: global.ajaxTimeout,
        async: true,
        error: function error(jqXHR, textStatus, errorThrown) {
          xhr = false;
          console.log(textStatus);
          console.log(errorThrown);
          console.log(jqXHR);
        }
      });
    } else {
      if (searchDropdownContent && searchDropdown.contains(searchDropdownContent)) {
        searchDropdown.removeChild(searchDropdownContent);
      }
    }
  });
});